<blockquote>
  <p>申明：背景图来自微博@胡歌，侵删～不过胡歌这么可爱应该不会介意的</p>
</blockquote>

<p>第一个问题：这玩意儿是什么？通俗的来讲：<br />
<code class="language-plaintext highlighter-rouge">Jekyll = web server + static blog + front end UI</code><br />
如果你想拥有一个自己的博客但是苦于数据库没学好，你可以来试试看；再如果想学前端，你也可以试试看～</p>

<p>做配置前请默念三遍四者之间的关系，保证倒背如流在进行下一步：</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1.Ruby 是语言。
2.gem 是一组 Ruby 程序，类似于「包」的概念。
3.RubyGems 是 Ruby 的包管理器，用来管理和安装 gems 的。
4.bundle是用来管理gems的项目，确保能够正确地安装项目依赖，确保能够运行正确的包。
</code></pre></div></div>

<h2 id="1-rvm-安装">1. RVM 安装</h2>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gpg <span class="nt">--keyserver</span> hkp://keys.gnupg.net <span class="nt">--recv-keys</span> 409B6B1796C275462A1703113804BB82D39DC0E3
curl <span class="nt">-sSL</span> https://get.rvm.io | bash <span class="nt">-s</span> stable
<span class="c">##如果上面秘钥导入失败会提示command建议，直接复制下来，实在不行找不到使用下面这个链接下载。</span>
curl <span class="nt">-L</span> https://raw.githubusercontent.com/wayneeseguin/rvm/master/binscripts/rvm-installer | bash <span class="nt">-s</span> stable
<span class="nb">source</span> /usr/local/rvm/scripts/rvm  <span class="c">##配置一次性变量，这里terminal暂时使用一下。熟悉的朋友可以直接配进bashrc自启</span>
</code></pre></div></div>
<p>期间会安装各种依赖包，等待一段时间后出现complete字样即成功安装。</p>
<h2 id="2-ruby-安装">2. ruby 安装</h2>
<h3 id="21-切换rvm源">2.1 切换rvm源</h3>
<p>接着就是换源，老外网真的慢- -没办法,跟linux换源是一个道理</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">#</span><span class="nx">echo</span> <span class="dl">"</span><span class="s2">ruby_url=https://cache.ruby-china.org/pub/ruby</span><span class="dl">"</span> <span class="o">&gt;</span> <span class="o">~</span><span class="sr">/.rvm/u</span><span class="nx">ser</span><span class="o">/</span><span class="nx">db</span>
<span class="err">#</span><span class="nx">此处本菜机子的是</span><span class="p">.</span><span class="nx">rvmrc</span><span class="err">，</span><span class="nx">直接把url导入</span><span class="err">：</span>
<span class="err">#</span><span class="nx">echo</span> <span class="dl">"</span><span class="s2">ruby_url=https://cache.ruby-china.org/pub/ruby</span><span class="dl">"</span> <span class="o">&gt;</span> <span class="sr">/root/</span><span class="p">.</span><span class="nx">rvmrc</span>
</code></pre></div></div>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="o">========================</span><span class="mi">2020</span><span class="o">-</span><span class="mi">03</span><span class="o">-</span><span class="mi">31</span><span class="nx">更新</span><span class="err">：</span><span class="nx">换源文件</span><span class="o">=================================</span>
<span class="o">+==============================================================================+</span>
<span class="o">|</span><span class="nx">echo</span> <span class="dl">"</span><span class="s2">ruby_url=https://cache.ruby-china.com/pub/ruby</span><span class="dl">"</span> <span class="o">&gt;</span> <span class="sr">/usr/</span><span class="nx">local</span><span class="o">/</span><span class="nx">rvm</span><span class="o">/</span><span class="nx">user</span><span class="o">/</span><span class="nx">db</span><span class="o">|</span>
<span class="o">+==============================================================================+</span>
</code></pre></div></div>
<p>找不到更新rvm源的文件，如果是按照上面方法，基本是在上面这个文件下。</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="nx">root</span><span class="p">@</span><span class="nd">iZ2ze9ebgot9gy5c2mi5ecZ</span> <span class="nx">user</span><span class="p">]</span><span class="err">#</span> <span class="nx">echo</span> <span class="dl">"</span><span class="s2">ruby_url=https://cache.ruby-china.com/pub/ruby</span><span class="dl">"</span> <span class="o">&gt;</span> <span class="sr">/usr/</span><span class="nx">local</span><span class="o">/</span><span class="nx">rvm</span><span class="o">/</span><span class="nx">user</span><span class="o">/</span><span class="nx">db</span>
<span class="p">[</span><span class="nx">root</span><span class="p">@</span><span class="nd">iZ2ze9ebgot9gy5c2mi5ecZ</span> <span class="nx">user</span><span class="p">]</span><span class="err">#</span> <span class="nx">cat</span> <span class="nx">db</span>
<span class="nx">ruby_url</span><span class="o">=</span><span class="nx">https</span><span class="p">:</span><span class="c1">//cache.ruby-china.com/pub/ruby</span>

<span class="p">[</span><span class="nx">root</span><span class="p">@</span><span class="nd">iZ2ze9ebgot9gy5c2mi5ecZ</span> <span class="nx">user</span><span class="p">]</span><span class="err">#</span> <span class="nx">rvm</span> <span class="nx">install</span> <span class="dl">"</span><span class="s2">ruby-2.5.7</span><span class="dl">"</span>
<span class="nx">Searching</span> <span class="k">for</span> <span class="nx">binary</span> <span class="nx">rubies</span><span class="p">,</span> <span class="k">this</span> <span class="nx">might</span> <span class="nx">take</span> <span class="nx">some</span> <span class="nx">time</span><span class="p">.</span>
<span class="nx">No</span> <span class="nx">binary</span> <span class="nx">rubies</span> <span class="nx">available</span> <span class="k">for</span><span class="p">:</span> <span class="nx">centos</span><span class="o">/</span><span class="mi">7</span><span class="o">/</span><span class="nx">x86_64</span><span class="o">/</span><span class="nx">ruby</span><span class="o">-</span><span class="mf">2.5</span><span class="p">.</span><span class="mi">7</span><span class="p">.</span>
<span class="nx">Continuing</span> <span class="kd">with</span> <span class="nx">compilation</span><span class="p">.</span> <span class="nx">Please</span> <span class="nx">read</span> <span class="dl">'</span><span class="s1">rvm help mount</span><span class="dl">'</span> <span class="nx">to</span> <span class="kd">get</span> <span class="nx">more</span> <span class="nx">information</span> <span class="nx">on</span> <span class="nx">binary</span> <span class="nx">rubies</span><span class="p">.</span>
<span class="nx">Checking</span> <span class="nx">requirements</span> <span class="k">for</span> <span class="nx">centos</span><span class="p">.</span>
<span class="nx">Requirements</span> <span class="nx">installation</span> <span class="nx">successful</span><span class="p">.</span>
<span class="nx">Installing</span> <span class="nx">Ruby</span> <span class="k">from</span> <span class="nx">source</span> <span class="nx">to</span><span class="p">:</span> <span class="o">/</span><span class="nx">usr</span><span class="o">/</span><span class="nx">local</span><span class="o">/</span><span class="nx">rvm</span><span class="o">/</span><span class="nx">rubies</span><span class="o">/</span><span class="nx">ruby</span><span class="o">-</span><span class="mf">2.5</span><span class="p">.</span><span class="mi">7</span><span class="p">,</span> <span class="k">this</span> <span class="nx">may</span> <span class="nx">take</span> <span class="nx">a</span> <span class="k">while</span> <span class="nx">depending</span> <span class="nx">on</span> <span class="nx">your</span> <span class="nx">cpu</span><span class="p">(</span><span class="nx">s</span><span class="p">)...</span>
<span class="nx">ruby</span><span class="o">-</span><span class="mf">2.5</span><span class="p">.</span><span class="mi">7</span> <span class="o">-</span> <span class="err">#</span><span class="nx">downloading</span> <span class="nx">ruby</span><span class="o">-</span><span class="mf">2.5</span><span class="p">.</span><span class="mi">7</span><span class="p">,</span> <span class="k">this</span> <span class="nx">may</span> <span class="nx">take</span> <span class="nx">a</span> <span class="k">while</span> <span class="nx">depending</span> <span class="nx">on</span> <span class="nx">your</span> <span class="nx">connection</span><span class="p">...</span>
<span class="o">**</span> <span class="nx">Resuming</span> <span class="nx">transfer</span> <span class="k">from</span> <span class="nx">byte</span> <span class="nx">position</span> <span class="mi">323584</span>
  <span class="o">%</span> <span class="nx">Total</span>    <span class="o">%</span> <span class="nx">Received</span> <span class="o">%</span> <span class="nx">Xferd</span>  <span class="nx">Average</span> <span class="nx">Speed</span>   <span class="nx">Time</span>    <span class="nx">Time</span>     <span class="nx">Time</span>  <span class="nx">Current</span>
                                 <span class="nx">Dload</span>  <span class="nx">Upload</span>   <span class="nx">Total</span>   <span class="nx">Spent</span>    <span class="nx">Left</span>  <span class="nx">Speed</span>
<span class="mi">100</span> <span class="mf">12.8</span><span class="nx">M</span>  <span class="mi">100</span> <span class="mf">12.8</span><span class="nx">M</span>    <span class="mi">0</span>     <span class="mi">0</span>  <span class="mi">6097</span><span class="nx">k</span>      <span class="mi">0</span>  <span class="mi">0</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">02</span>  <span class="mi">0</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">02</span> <span class="o">--</span><span class="p">:</span><span class="o">--</span><span class="p">:</span><span class="o">--</span> <span class="mi">6095</span><span class="nx">k</span>
<span class="nx">ruby</span><span class="o">-</span><span class="mf">2.5</span><span class="p">.</span><span class="mi">7</span> <span class="o">-</span> <span class="err">#</span><span class="nx">extracting</span> <span class="nx">ruby</span><span class="o">-</span><span class="mf">2.5</span><span class="p">.</span><span class="mi">7</span> <span class="nx">to</span> <span class="o">/</span><span class="nx">usr</span><span class="o">/</span><span class="nx">local</span><span class="o">/</span><span class="nx">rvm</span><span class="o">/</span><span class="nx">src</span><span class="o">/</span><span class="nx">ruby</span><span class="o">-</span><span class="mf">2.5</span><span class="p">.</span><span class="mi">7</span><span class="p">.....</span>
<span class="nx">ruby</span><span class="o">-</span><span class="mf">2.5</span><span class="p">.</span><span class="mi">7</span> <span class="o">-</span> <span class="err">#</span><span class="nx">configuring</span><span class="p">...................................................................</span>
<span class="nx">ruby</span><span class="o">-</span><span class="mf">2.5</span><span class="p">.</span><span class="mi">7</span> <span class="o">-</span> <span class="err">#</span><span class="nx">post</span><span class="o">-</span><span class="nx">configuration</span><span class="p">..</span>
<span class="nx">ruby</span><span class="o">-</span><span class="mf">2.5</span><span class="p">.</span><span class="mi">7</span> <span class="o">-</span> <span class="err">#</span><span class="nx">compiling</span><span class="p">..................................................................................</span>
<span class="nx">ruby</span><span class="o">-</span><span class="mf">2.5</span><span class="p">.</span><span class="mi">7</span> <span class="o">-</span> <span class="err">#</span><span class="nx">installing</span><span class="p">..............................</span>
<span class="nx">ruby</span><span class="o">-</span><span class="mf">2.5</span><span class="p">.</span><span class="mi">7</span> <span class="o">-</span> <span class="err">#</span><span class="nx">making</span> <span class="nx">binaries</span> <span class="nx">executable</span><span class="p">..</span>
<span class="nx">ruby</span><span class="o">-</span><span class="mf">2.5</span><span class="p">.</span><span class="mi">7</span> <span class="o">-</span> <span class="err">#</span><span class="nx">downloading</span> <span class="nx">rubygems</span><span class="o">-</span><span class="mf">3.0</span><span class="p">.</span><span class="mi">8</span>
  <span class="o">%</span> <span class="nx">Total</span>    <span class="o">%</span> <span class="nx">Received</span> <span class="o">%</span> <span class="nx">Xferd</span>  <span class="nx">Average</span> <span class="nx">Speed</span>   <span class="nx">Time</span>    <span class="nx">Time</span>     <span class="nx">Time</span>  <span class="nx">Current</span>
                                 <span class="nx">Dload</span>  <span class="nx">Upload</span>   <span class="nx">Total</span>   <span class="nx">Spent</span>    <span class="nx">Left</span>  <span class="nx">Speed</span>
 <span class="mi">25</span>  <span class="mi">867</span><span class="nx">k</span>   <span class="mi">25</span>  <span class="mi">223</span><span class="nx">k</span>    <span class="mi">0</span>     <span class="mi">0</span>  <span class="mi">15138</span>      <span class="mi">0</span>  <span class="mi">0</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">58</span>  <span class="mi">0</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">15</span>  <span class="mi">0</span><span class="p">:</span><span class="mi">00</span><span class="p">:</span><span class="mi">43</span> <span class="mi">16300</span>

<span class="nx">ruby</span><span class="o">-</span><span class="mf">2.5</span><span class="p">.</span><span class="mi">7</span> <span class="o">-</span> <span class="err">#</span><span class="nx">adjusting</span> <span class="err">#</span><span class="nx">shebangs</span> <span class="k">for</span> <span class="p">(</span><span class="nx">gem</span> <span class="nx">irb</span> <span class="nx">erb</span> <span class="nx">ri</span> <span class="nx">rdoc</span> <span class="nx">testrb</span> <span class="nx">rake</span><span class="p">).</span>
<span class="nx">Install</span> <span class="k">of</span> <span class="nx">ruby</span><span class="o">-</span><span class="mf">2.5</span><span class="p">.</span><span class="mi">7</span> <span class="o">-</span> <span class="err">#</span><span class="nx">complete</span>
<span class="nx">Ruby</span> <span class="nx">was</span> <span class="nx">built</span> <span class="nx">without</span> <span class="nx">documentation</span><span class="p">,</span> <span class="nx">to</span> <span class="nx">build</span> <span class="nx">it</span> <span class="nx">run</span><span class="p">:</span> <span class="nx">rvm</span> <span class="nx">docs</span> <span class="nx">generate</span><span class="o">-</span><span class="nx">ri</span>
</code></pre></div></div>
<p>基本上看到上面的complete就安装完了</p>

<p>#安装ruby
rvm list know            #查询已知rvm软件列表
rvm install “ruby-2.5.5”   #安装ruby
rvm use 2.5.5          #指定使用的ruby版本号</p>

<h2 id="3-配置ruby-gems环境">3. 配置ruby-gems环境</h2>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#配置前确认：
rvm -v
rvm 1.29.9 (latest) by Michal Papis, Piotr Kuczynski, Wayne E. Seguin [https://rvm.io]
gem -v
3.0.6
ruby -v
ruby -v
ruby 2.5.5p157 (2019-03-15 revision 67260) [x86_64-linux]
gem source -l
gem sources --remove https://rubygems.org/
gem sources -a https://gems.ruby-china.com  ##换源 换源 换源
gem update --system
gem install bundler
</code></pre></div></div>

<h2 id="4-安装jekyll">4. 安装jekyll</h2>

<p><code class="language-plaintext highlighter-rouge">gem install jekyll</code>
安装jekyll工具，保证jekyll能顺畅运行。此处跟每个人下载的模板不一样所需要的工具不一样，我这里把基本的一些工具贴上，后期模板不一样看一下环境要求根据要求即可。</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>gem <span class="nb">install </span>bundler      <span class="c">#打包用工具</span>
gem <span class="nb">install </span>jekyll-paginate <span class="c">#分页设置工具 重要 一定要安装</span>
gem <span class="nb">install </span>minima      <span class="c">#默认主题</span>
gem <span class="nb">install </span>jekyll-feed <span class="c">#订阅用的工具</span>
</code></pre></div></div>
<h2 id="bundle">bundle?</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>% <span class="nb">sudo </span>bundle <span class="nb">exec </span>rake production:export
/System/Library/Frameworks/Ruby.framework/Versions/2.6/usr/lib/ruby/2.6.0/universal-darwin19/rbconfig.rb:229: warning: Insecure world writable <span class="nb">dir</span> /usr/local/sbin <span class="k">in </span>PATH, mode 040777
fatal: 不是一个 git 仓库（或者任何父目录）：.git
Could not find rake-10.5.0 <span class="k">in </span>any of the sources
Run <span class="sb">`</span>bundle <span class="nb">install</span><span class="sb">`</span> to <span class="nb">install </span>missing gems.
</code></pre></div></div>
<p>到你所在的博客目录下，<code class="language-plaintext highlighter-rouge">git init</code>：</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bin4xin@bin4xin<span class="s1">'s MacbookPro text-theme % pwd
/Users/bin4xin/blog/text-theme
bin4xin@bin4xin'</span>s MacbookPro text-theme % git init
已初始化空的 Git 仓库于 /Users/bin4xin/blog/text-theme/.git/
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>% bundle config mirror.https://rubygems.org https://gems.ruby-china.com
/System/Library/Frameworks/Ruby.framework/Versions/2.6/usr/lib/ruby/2.6.0/universal-darwin19/rbconfig.rb:229: warning: Insecure world writable <span class="nb">dir</span> /usr/local/sbin <span class="k">in </span>PATH, mode 040777
bin4xin@bin4xin<span class="s1">'s MacbookPro text-theme % sudo bundle install                                                  
/System/Library/Frameworks/Ruby.framework/Versions/2.6/usr/lib/ruby/2.6.0/universal-darwin19/rbconfig.rb:229: warning: Insecure world writable dir /usr/local/sbin in PATH, mode 040777
Don'</span>t run Bundler as root. Bundler can ask <span class="k">for </span><span class="nb">sudo </span><span class="k">if </span>it is needed, and installing your bundle as root will <span class="nb">break </span>this application <span class="k">for </span>all
non-root <span class="nb">users </span>on this machine.
Fetching gem metadata from https://gems.ruby-china.com/...........
Fetching rake 10.5.0
Installing rake 10.5.0
Fetching concurrent-ruby 1.1.5
Installing concurrent-ruby 1.1.5
Fetching i18n 1.7.0
Installing i18n 1.7.0
··省略
··
··
Fetching sassc 2.2.1
Installing sassc 2.2.1 with native extensions

Bundle <span class="nb">complete</span><span class="o">!</span> 3 Gemfile dependencies, 42 gems now installed.
</code></pre></div></div>
<h2 id="5-启动服务">5. 启动服务</h2>
<p>一般你们都是直接下载了模板，模板解压后进入文件夹即可。比如我这里模板文件夹叫blog</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>unzip blog.zip
<span class="nb">cd </span>blog/
git init <span class="c">#如果你有多个模板，记得先用这个命令，把当前文件夹当做根目录；同理使用其他模板第一步输入这个命令</span>
jekyll serve <span class="nt">-P</span> 80   <span class="c">#自动构建并运行jekyll服务</span>
&lt;/pre&gt;
<span class="c">## 6. jekyll报错</span>
<span class="sb">```</span>javascript
Could not find gem <span class="s1">'X'</span> <span class="k">in </span>any of the gem sources listed <span class="k">in </span>your Gemfile.<span class="o">(</span>Bundler::GemNotFound<span class="o">)</span>
gem <span class="nb">install </span>X
安装即可
</code></pre></div></div>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mi">1</span><span class="p">.</span><span class="nx">jekyll</span><span class="o">-</span><span class="nx">paginate使用失败</span> <span class="nx">即使是安装了jekyll</span><span class="o">-</span><span class="nx">paginate</span><span class="err">，</span><span class="nx">也会报错</span><span class="err">。</span>
<span class="nx">gem</span> <span class="nx">list</span> <span class="o">--</span><span class="nx">local</span> <span class="o">|</span> <span class="nx">grep</span> <span class="nx">jekyll</span><span class="o">-</span><span class="nx">paginate</span> <span class="err">#</span><span class="nx">查看本地gem安装插件</span>
<span class="nx">确认安装上</span><span class="err">，</span><span class="nx">在博客根目录下编辑Gemfile</span><span class="err">，</span><span class="nx">添加</span><span class="err">：</span><span class="nx">gem</span> <span class="dl">'</span><span class="s1">jekyll-paginate</span><span class="dl">'</span><span class="p">,</span> <span class="nx">group</span><span class="p">:</span> <span class="p">:</span><span class="nx">jekyll_plugins</span>

<span class="mi">2</span><span class="p">.</span><span class="nx">cannot</span> <span class="nx">load</span> <span class="nx">such</span> <span class="nx">file</span> <span class="o">--</span> <span class="nx">kramdown</span><span class="o">-</span><span class="nx">parser</span><span class="o">-</span><span class="nx">gfm</span> <span class="p">(</span><span class="nx">LoadError</span><span class="p">)</span>
<span class="nx">安装即可</span><span class="err">。</span><span class="nx">安装</span> <span class="nx">kramdown</span><span class="o">-</span><span class="nx">parser</span><span class="o">-</span><span class="nx">gfm</span> <span class="err">，</span><span class="nx">不要分开一个一个安装</span><span class="err">。</span>
<span class="o">&lt;</span><span class="sr">/pre</span><span class="err">&gt;
</span><span class="nx">现在jekyll服务启动后</span><span class="err">，</span><span class="nx">web的服务是使用WEBrick服务器</span><span class="err">，</span><span class="nx">会有以下让我觉得不舒服的地方</span><span class="err">：</span><span class="o">&lt;</span><span class="nx">br</span><span class="o">&gt;</span>
<span class="mi">1</span><span class="err">）</span><span class="nx">目录遍历</span><span class="o">&lt;</span><span class="nx">br</span><span class="o">&gt;</span>
<span class="mi">2</span><span class="err">）</span><span class="nx">无法隐藏服务器版本号</span>
<span class="err">（</span><span class="nx">也许是能够这样操作但是我没有发现</span><span class="err">），</span><span class="nx">所以试了下发现nginx也是可以的</span><span class="o">&lt;</span><span class="nx">br</span><span class="o">&gt;</span>
<span class="nx">链接传送门</span><span class="err">：###</span>
</code></pre></div></div>
