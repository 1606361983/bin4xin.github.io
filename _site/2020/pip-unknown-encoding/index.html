<blockquote>
  <p>可怖的unkown encoding.</p>
</blockquote>

<p>自从修改了windows终端的编码格式后，就出了各种问题，几乎在终端上执行的软件都运行不了，提示<code class="language-plaintext highlighter-rouge">LookupError: unknown encoding: cp65001</code>，如下报错。</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">C</span><span class="p">:</span><span class="err">\</span><span class="nx">Users</span><span class="err">\</span><span class="nx">本阿信</span><span class="o">&gt;</span><span class="nx">pip</span> <span class="o">--</span><span class="nx">version</span>
<span class="nx">Traceback</span> <span class="p">(</span><span class="nx">most</span> <span class="nx">recent</span> <span class="nx">call</span> <span class="nx">last</span><span class="p">):</span>
  <span class="nx">File</span> <span class="dl">"</span><span class="s2">c:</span><span class="se">\</span><span class="s2">python27</span><span class="se">\</span><span class="s2">lib</span><span class="se">\r</span><span class="s2">unpy.py</span><span class="dl">"</span><span class="p">,</span> <span class="nx">line</span> <span class="mi">174</span><span class="p">,</span> <span class="k">in</span> <span class="nx">_run_module_as_main</span>
    <span class="dl">"</span><span class="s2">__main__</span><span class="dl">"</span><span class="p">,</span> <span class="nx">fname</span><span class="p">,</span> <span class="nx">loader</span><span class="p">,</span> <span class="nx">pkg_name</span><span class="p">)</span>
  <span class="nx">File</span> <span class="dl">"</span><span class="s2">c:</span><span class="se">\</span><span class="s2">python27</span><span class="se">\</span><span class="s2">lib</span><span class="se">\r</span><span class="s2">unpy.py</span><span class="dl">"</span><span class="p">,</span> <span class="nx">line</span> <span class="mi">72</span><span class="p">,</span> <span class="k">in</span> <span class="nx">_run_code</span>
    <span class="nx">exec</span> <span class="nx">code</span> <span class="k">in</span> <span class="nx">run_globals</span>
  <span class="nx">File</span> <span class="dl">"</span><span class="s2">C:</span><span class="se">\</span><span class="s2">Python27</span><span class="se">\</span><span class="s2">Scripts</span><span class="se">\</span><span class="s2">pip.exe</span><span class="se">\</span><span class="s2">__main__.py</span><span class="dl">"</span><span class="p">,</span> <span class="nx">line</span> <span class="mi">4</span><span class="p">,</span> <span class="k">in</span> <span class="o">&lt;</span><span class="nx">module</span><span class="o">&gt;</span>
  <span class="nx">File</span> <span class="dl">"</span><span class="s2">c:</span><span class="se">\</span><span class="s2">python27</span><span class="se">\</span><span class="s2">lib</span><span class="se">\</span><span class="s2">site-packages</span><span class="se">\</span><span class="s2">pip</span><span class="se">\</span><span class="s2">_internal</span><span class="se">\</span><span class="s2">cli</span><span class="se">\</span><span class="s2">main.py</span><span class="dl">"</span><span class="p">,</span> <span class="nx">line</span> <span class="mi">10</span><span class="p">,</span> <span class="k">in</span> <span class="o">&lt;</span><span class="nx">module</span><span class="o">&gt;</span>
    <span class="k">from</span> <span class="nx">pip</span><span class="p">.</span><span class="nx">_internal</span><span class="p">.</span><span class="nx">cli</span><span class="p">.</span><span class="nx">autocompletion</span> <span class="k">import</span> <span class="nx">autocomplete</span>
  <span class="nx">File</span> <span class="dl">"</span><span class="s2">c:</span><span class="se">\</span><span class="s2">python27</span><span class="se">\</span><span class="s2">lib</span><span class="se">\</span><span class="s2">site-packages</span><span class="se">\</span><span class="s2">pip</span><span class="se">\</span><span class="s2">_internal</span><span class="se">\</span><span class="s2">cli</span><span class="se">\</span><span class="s2">autocompletion.py</span><span class="dl">"</span><span class="p">,</span> <span class="nx">line</span> <span class="mi">9</span><span class="p">,</span> <span class="k">in</span> <span class="o">&lt;</span><span class="nx">module</span><span class="o">&gt;</span>
    <span class="k">from</span> <span class="nx">pip</span><span class="p">.</span><span class="nx">_internal</span><span class="p">.</span><span class="nx">cli</span><span class="p">.</span><span class="nx">main_parser</span> <span class="k">import</span> <span class="nx">create_main_parser</span>
  <span class="nx">File</span> <span class="dl">"</span><span class="s2">c:</span><span class="se">\</span><span class="s2">python27</span><span class="se">\</span><span class="s2">lib</span><span class="se">\</span><span class="s2">site-packages</span><span class="se">\</span><span class="s2">pip</span><span class="se">\</span><span class="s2">_internal</span><span class="se">\</span><span class="s2">cli</span><span class="se">\</span><span class="s2">main_parser.py</span><span class="dl">"</span><span class="p">,</span> <span class="nx">line</span> <span class="mi">7</span><span class="p">,</span> <span class="k">in</span> <span class="o">&lt;</span><span class="nx">module</span><span class="o">&gt;</span>
    <span class="k">from</span> <span class="nx">pip</span><span class="p">.</span><span class="nx">_internal</span><span class="p">.</span><span class="nx">cli</span> <span class="k">import</span> <span class="nx">cmdoptions</span>
  <span class="nx">File</span> <span class="dl">"</span><span class="s2">c:</span><span class="se">\</span><span class="s2">python27</span><span class="se">\</span><span class="s2">lib</span><span class="se">\</span><span class="s2">site-packages</span><span class="se">\</span><span class="s2">pip</span><span class="se">\</span><span class="s2">_internal</span><span class="se">\</span><span class="s2">cli</span><span class="se">\</span><span class="s2">cmdoptions.py</span><span class="dl">"</span><span class="p">,</span> <span class="nx">line</span> <span class="mi">31</span><span class="p">,</span> <span class="k">in</span> <span class="o">&lt;</span><span class="nx">module</span><span class="o">&gt;</span>
    <span class="k">from</span> <span class="nx">pip</span><span class="p">.</span><span class="nx">_internal</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">ui</span> <span class="k">import</span> <span class="nx">BAR_TYPES</span>
  <span class="nx">File</span> <span class="dl">"</span><span class="s2">c:</span><span class="se">\</span><span class="s2">python27</span><span class="se">\</span><span class="s2">lib</span><span class="se">\</span><span class="s2">site-packages</span><span class="se">\</span><span class="s2">pip</span><span class="se">\</span><span class="s2">_internal</span><span class="se">\</span><span class="s2">utils</span><span class="se">\</span><span class="s2">ui.py</span><span class="dl">"</span><span class="p">,</span> <span class="nx">line</span> <span class="mi">64</span><span class="p">,</span> <span class="k">in</span> <span class="o">&lt;</span><span class="nx">module</span><span class="o">&gt;</span>
    <span class="nx">_BaseBar</span> <span class="o">=</span> <span class="nx">_select_progress_class</span><span class="p">(</span><span class="nx">IncrementalBar</span><span class="p">,</span> <span class="nx">Bar</span><span class="p">)</span>  <span class="err">#</span> <span class="nx">type</span><span class="p">:</span> <span class="nx">Any</span>
  <span class="nx">File</span> <span class="dl">"</span><span class="s2">c:</span><span class="se">\</span><span class="s2">python27</span><span class="se">\</span><span class="s2">lib</span><span class="se">\</span><span class="s2">site-packages</span><span class="se">\</span><span class="s2">pip</span><span class="se">\</span><span class="s2">_internal</span><span class="se">\</span><span class="s2">utils</span><span class="se">\</span><span class="s2">ui.py</span><span class="dl">"</span><span class="p">,</span> <span class="nx">line</span> <span class="mi">57</span><span class="p">,</span> <span class="k">in</span> <span class="nx">_select_progress_class</span>
    <span class="nx">six</span><span class="p">.</span><span class="nx">text_type</span><span class="p">().</span><span class="nx">join</span><span class="p">(</span><span class="nx">characters</span><span class="p">).</span><span class="nx">encode</span><span class="p">(</span><span class="nx">encoding</span><span class="p">)</span>
<span class="nx">LookupError</span><span class="p">:</span> <span class="nx">unknown</span> <span class="nx">encoding</span><span class="p">:</span> <span class="nx">cp65001</span>
</code></pre></div></div>

<p>只能怪自己，好好的改什么txt文本编码，现在好了。<a href="https://stackoverflow.com/questions/35176270/python-2-7-lookuperror-unknown-encoding-cp65001">解铃还须系铃人：</a>暂时在该终端下可以使用pip</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">C</span><span class="p">:</span><span class="err">\</span><span class="nx">Users</span><span class="err">\</span><span class="nx">本阿信</span><span class="o">&gt;</span><span class="kd">set</span> <span class="nx">PYTHONIOENCODING</span><span class="o">=</span><span class="nx">UTF</span><span class="o">-</span><span class="mi">8</span>

<span class="nx">C</span><span class="p">:</span><span class="err">\</span><span class="nx">Users</span><span class="err">\</span><span class="nx">本阿信</span><span class="o">&gt;</span><span class="nx">pip</span> <span class="o">--</span><span class="nx">version</span>
<span class="nx">pip</span> <span class="mf">20.0</span><span class="p">.</span><span class="mi">2</span> <span class="k">from</span> <span class="nx">c</span><span class="p">:</span><span class="err">\</span><span class="nx">python27</span><span class="err">\</span><span class="nx">lib</span><span class="err">\</span><span class="nx">site</span><span class="o">-</span><span class="nx">packages</span><span class="err">\</span><span class="nx">pip</span> <span class="p">(</span><span class="nx">python</span> <span class="mf">2.7</span><span class="p">)</span>
</code></pre></div></div>
<p>链接还建议设置全局变量为<code class="language-plaintext highlighter-rouge">$env:PYTHONIOENCODING = "UTF-8"</code>，但是我搜索了一下，没有找到方法，希望会的朋友邮件我教我。
<code class="language-plaintext highlighter-rouge">CHCP 936</code></p>

<hr />

<p>UTF-8是unicode编码的一种落地方案：</p>

<p>Unicode符号范围 | UTF-8编码方式
(十六进制) | （二进制）
——————–+———————————————
0000 0000-0000 007F | 0xxxxxxx
0000 0080-0000 07FF | 110xxxxx 10xxxxxx
0000 0800-0000 FFFF | 1110xxxx 10xxxxxx 10xxxxxx
0001 0000-0010 FFFF | 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</p>

<p>\x对应的是UTF-8编码的数据，通过转化规则可以转换为Unicode编码，就能得到对应的汉字，转换规则很简单，先将\x去掉，转换为数字，然后进行对应的位移操作即可，需要注意的是先要判断utf-8的位数.</p>
<blockquote>
  <p>联系我:chihou.pro@gmail.com ^_^谢谢</p>
</blockquote>
